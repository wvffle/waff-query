(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.waff=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var checkEvents=function(self){if(self.__events==null){self.__events={};self.__event_handlers={};if(self.addEventListener!=null)self.__events_inited=[]}};var EventEmitter=function EventEmitter(){checkEvents(this)};EventEmitter.prototype.on=on=function(event,callback){checkEvents(this);if(this.__events[event]==null){this.__events[event]=[]}if(this.__event_handlers[event]==null){this.__event_handlers[event]=function(){return true}}if(this.addEventListener!=null&&!~this.__events_inited.indexOf(event)){this.__events_inited.push(event);this.addEventListener(event,function(evt){var callbacks=this.__events[event];for(var i=0;i<callbacks.length;++i){callbacks[i].call(this,evt.__data||evt)}})}var addEvent=this.__event_handlers[event].call(this,callback);if(addEvent!==false){this.__events[event].push(callback)}return this};EventEmitter.prototype.off=function(event,callback){if(this.__events[event]){if(callback==null){this.__events[event]=[]}else{var index=this.__events[event].indexOf(callback);if(index!==-1){this.__events[event].splice(index,1)}}}return this};EventEmitter.prototype.handler=function(event,callback){this.__event_handlers[event]=callback;return this};EventEmitter.prototype.emit=function(event,data){if(this.__events[event]!=null){if(this.addEventListener!=null){if(event instanceof Event===false)event=new Event(event);event.__data=data;event.__data.originalEvent=event;this.dispatchEvent(event)}else{var callbacks=this.__events[event];for(var i=0;i<callbacks.length;++i){callbacks[i].call(this,data)}}}return this};var targets=[];try{EventTarget.prototype.waff="<3";if(EventTarget.prototype.waff!==Element.prototype.waff)throw":(";targets.push(EventTarget)}catch(e){[].push.apply(targets,[window.constructor,Element,Document,Node]);if("XMLHttpRequestEventTarget"in window)targets.push(XMLHttpRequestEventTarget)}for(var i=0;i<targets.length;++i){var target=targets[i];target.prototype.on=EventEmitter.prototype.on;target.prototype.off=EventEmitter.prototype.off;target.prototype.emit=EventEmitter.prototype.emit;target.prototype.handler=EventEmitter.prototype.handler}module.exports=EventEmitter},{}],2:[function(require,module,exports){var selector=require("../util/selector");var arrays=require("../util/array");var create=function(selector,attr,children){var parsedSelector=selector.parse(selector);var element=document.createElement(parsedSelector.tag||"div");if(children==null&&arrays.arrayLike(attr)){children=attr;attr={}}if(children!=null&&arrays.array(attr)){var tmp_attr={};for(var i=0;i<attr.length;++i){tmp_attr[attr[i]]=""}attr=tmp_attr}attr=attr||{};if(parsedSelector.id!==false){element.id=parsedSelector.id}element.classes=parsedSelector.classes;element.append(children);element.attr(parsedSelector.attr);element.attr(attr)};module.exports=create},{"../util/array":25,"../util/selector":28}],3:[function(require,module,exports){(function(){require("./prototype/after");require("./prototype/append");require("./prototype/before");require("./prototype/clear");require("./prototype/prepend");require("./prototype/has");require("./prototype/inside");require("./prototype/html");require("./prototype/text");require("./prototype/attr");require("./prototype/css");require("./properties/classes");require("./properties/next");require("./properties/prev");require("./properties/parent");require("./properties/selector")})()},{"./properties/classes":4,"./properties/next":5,"./properties/parent":6,"./properties/prev":7,"./properties/selector":8,"./prototype/after":9,"./prototype/append":10,"./prototype/attr":11,"./prototype/before":12,"./prototype/clear":13,"./prototype/css":14,"./prototype/has":15,"./prototype/html":16,"./prototype/inside":17,"./prototype/prepend":18,"./prototype/text":19}],4:[function(require,module,exports){var objects=require("../../util/object");var arrays=require("../../util/array");var classes={get:function(){var res={};var self=this;var classList=this.className.split(" ");var i=0;for(var j=0;j<classList.length;++j){if(classList[j]!==""){res[i]=classList[j];++i}}res.length=i;res.add=function(name){res[res.length++]=name;self.className=arrays.join(res," ");return self};res.remove=function(name){arrays.remove(res,name);self.className=arrays.join(res," ");return self};res.toggle=function(name){if(arrays.has(res,name)){res.remove(name)}else{res.add(name)}}},set:function(classList){var res=[];for(var j=0;j<classList.length;++j){if(classList[j]!==""){res.push(classList[j])}}this.className=res.join(" ")}};objects.prop(Element.prototype,"classes",classes);objects.prop(Element.prototype,"class",classes)},{"../../util/array":25,"../../util/object":27}],5:[function(require,module,exports){var objects=require("../../util/object");var next={get:function(){return this.nextElementSibling},set:function(element){if(element instanceof Element||element instanceof Text){element.after(this);return this}else{throw"argument 1 has to be Element or Text"}}};objects.prop(Element.prototype,"next",next)},{"../../util/object":27}],6:[function(require,module,exports){var objects=require("../../util/object");var parent={get:function(){return this.parentElement},set:function(element){if(element instanceof Element||element instanceof Text){element.appendChild(this);return this}else{throw"argument 1 has to be Element or Text"}}};objects.prop(Element.prototype,"parent",parent)},{"../../util/object":27}],7:[function(require,module,exports){var objects=require("../../util/object");var prev={get:function(){return this.previousElementSibling},set:function(element){if(element instanceof Element||element instanceof Text){element.before(this);return this}else{throw"argument 1 has to be Element or Text"}}};objects.prop(Element.prototype,"prev",prev)},{"../../util/object":27}],8:[function(require,module,exports){var objects=require("../../util/object");var selectors=require("../../util/selector");var selector={get:function(){var tag=this.tagName.toLowerCase();var sel=tag==="div"?"":tag;if(this.id){sel+=id}var classes=this.className.split(" ");for(var i=0;i<classes.length;++i){if(classes[i]!=""){sel+="."+classes[i]}}return sel},set:function(sel){if(typeof sel!=="string"){throw"argument 1 has to be String"}var parsedSelector=selectors.parse(sel);this.tagName=parsedSelector.tag||"div";this.classes=parsedSelector.classes;if(sel.id){this.id=parsedSelector.id}this.attr(parsedSelector.attr)}};objects.prop(Element.prototype,"selector",selector)},{"../../util/object":27,"../../util/selector":28}],9:[function(require,module,exports){Element.prototype.after=function(element){if(element.parentElement!=null){if(element.nextSibling!=null){element.parentElement.insertBefore(this,element.nextSibling)}else{element.parentElement.appendChild(this)}}else{throw"cannot insert after root element"}return this}},{}],10:[function(require,module,exports){var array=require("../../util/array.js");Element.prototype.append=function(){for(var i=0;i<arguments.length;++i){var element=arguments[i];if(array.arrayLike(element)){for(var j=0;j<element.length;++j){if(element[j]instanceof Element||element[j]instanceof Text){this.appendChild(element[j])}}}else{this.appendChild(element)}}return this}},{"../../util/array.js":25}],11:[function(require,module,exports){var objects=require("../../util/object");Element.prototype.attr=function(name,value){if(objects.object(name)){for(var i in name){if(name.hasOwnProperty(i)){this.setAttribute(i,name[i].toString())}}}else if(name==null||typeof name==="string"){if(name==null){var attributes=this.attributes;var res={};for(var i=0;i<attributes.length;++i){res[attributes[i].nodeName]=attributes[i].nodeValue}return res}else if(value===null){this.removeAttribute(name)}else if(value===undefined){return this.attr()[name]}else{return this.getAttribute(name)}}else{throw"argument 1 has to be String, Object or null"}}},{"../../util/object":27}],12:[function(require,module,exports){Element.prototype.before=function(element){if(element.parentElement!=null){element.parentElement.insertBefore(this,element)}else{throw"cannot insert before root element"}return this}},{}],13:[function(require,module,exports){Element.prototype.clear=function(){var len=this.childNodes.length;while(len-- >0){this.removeChild(this.firstChild)}return this}},{}],14:[function(require,module,exports){var strings=require("../../util/string");var arrays=require("../../util/array");var trbl=function(property,suffix){suffix=suffix||"";suffix=suffix[0].toUpperCase()+suffix.slice(1);return[property+"Top"+suffix,property+"Right"+suffix,property+"Bottom"+suffix,property+"Left"+suffix,property+suffix]};var pixels=["width","height","lineHeight","top","right","bottom","left","fontSize","textIndent","wordSpacing"];arrays.add(pixels,trbl("margin"));arrays.add(pixels,trbl("padding"));arrays.add(pixels,trbl("border","width"));Element.prototype.css=function(properties,value){if(typeof properties==="string"){if(value==null){return this.css()[strings.camel(properties)]||this.css()[strings.dash(properties)]}this.style[strings.camel(properties)]=value}else if(objects.object(properties)){for(var i in properties){if(properties.hasOwnProperty(i)){var property=strings.camel(i);var style=properties[i];if(isNaN(+style)===false&&arrays.has(pixels,property)){style+="px"}this.style[property]=style}}}else if(properties==null){var properties=getComputedStyle(this);var res={};for(var i in properties){if(isNaN(+i)){res[prop]=style}}if(res.color===undefined){var text=res.cssText;res={};var rules=text.split(";");for(var i=0;i<rules.length;++i){var rule=rules[i].split(":");if(rule[1]!=null){res[strings.spaces(rule[0])]=strings.spaces(rule[1])}}}return res}else{throw"first argument has to be String, Object or null"}return this}},{"../../util/array":25,"../../util/string":29}],15:[function(require,module,exports){Element.prototype.has=function(element){return element.inside(this)}},{}],16:[function(require,module,exports){Element.prototype.html=function(str){if(str==null){return this.innerhtml}if(str instanceof text){str=str.get()}if(typeof str==="string"){this.innerhtml=str;return this}else if(str instanceof element){this.clear();this.appendchild(str);return this}else{throw"argument 1 has to be String, Element, Text or null"}}},{}],17:[function(require,module,exports){Element.prototype.inside=function(element){if(this.parent===element){return true}var current=this;while(current=current.parentElement){if(current==parent){return true}}}},{}],18:[function(require,module,exports){var array=require("../../util/array.js");Element.prototype.prepend=function(element){for(var i=arguments.length-1;i>=0;--i){var element=arguments[i];if(array.arrayLike(element)){for(var j=element.length-1;j>=0;--j){if(element[j]instanceof Element||element[j]instanceof Text){if(this.firstChild){this.insertBefore(element[j],this.firstChild)}else{this.appendChild(element[j])}}}}else{if(this.firstChild){this.insertBefore(element,this.firstChild)}else{this.appendChild(element)}}}return this}},{"../../util/array.js":25}],19:[function(require,module,exports){Element.prototype.text=function(str){if(str==null){return this.textContent}if(str instanceof Text){str=str.get()}else if(str instanceof Element){str=str.textContent}if(typeof str==="string"){this.textContent=str;return this}else{throw"argument 1 has to be String, Element, Text or null"}}},{}],20:[function(require,module,exports){var array=require("../util/array");var tags=/^\*|[A-Za-z0-9*_-]+$/;var ids=/^#[A-Za-z0-9_-]+$/;var classes=/^\.[A-Za-z0-9_.-]+$/;var query=function(selector,options){options=options||{};options.root=options.root||document;options.single=options.single===false?false:true;options.array=options.array===false?false:true;selector=selector===""?options.root.children[0]:selector;if(selector==null){selector=options.root===document?document.body:"body"}if(selector instanceof Element){return options.single?selector:[selector]}var querySelector=function(selector,root){if(options.single)return[root.querySelector(selector)];else return root.querySelectorAll(selector)};var queryElements=function(selector){if(array.arrayLike(options.root)===false){options.root=[options.root]}if(selector[0]===">"){var root=options.root;selector=selector.slice(1);options.root=[];if(selector[0]===" ")selector=selector.slice(1);if(selector==="")selector="*";for(var i=0;i<root.length;++i){[].push.apply(options.root,root[i].children)}}var res=[];for(var i=0;i<options.root.length;++i){var root=options.root[i];if(tags.test(selector)){[].push.apply(res,root.getElementsByTagName(selector))}else if(ids.test(selector)){res.push(root.getElementById(selector))}else if(classes.test(selector)){[].push.apply(res,root.getElementsByClassName(selector))}[].push.apply(res,querySelector(selector,root))}return res};if(array.arrayLike(selector)){var res=[];for(var i=0;i<selector.length;++i){if(selector[i]instanceof Element){res.push(selector[i])}else if(typeof selector[i]==="string"){var element=queryElements(selector[i]);if(element!=null)[].push.apply(res,element)}if(options.single&&!!res.length)return res[0]}return options.single?undefined:res}else{if(typeof selector!=="string"){throw"selector must be a String, Element or an Array"}var res=queryElements(selector);return options.single?res[0]:options.array?array.from(res):res}};query.all=function(selector,options){options=options||{};options.single=false;return query(selector,options)};Element.prototype.query=function(selector,options){options=options||{};options.root=this;return query(selector,options)};Element.prototype.query.all=function(selector,options){options=options||{};options.root=this;return query.all(selector,options)};Element.prototype.q=Element.prototype.query;Element.prototype.qq=Element.prototype.query.all;module.exports=query},{"../util/array":25}],21:[function(require,module,exports){var text=function(str){return document.createTextNode(str||"")};module.exports=text},{}],22:[function(require,module,exports){(function(){require("./prototype/get");require("./prototype/set")})()},{"./prototype/get":23,"./prototype/set":24}],23:[function(require,module,exports){Text.prototype.get=function(){return this.nodeValue}},{}],24:[function(require,module,exports){Text.prototype.set=function(str){this.nodeValue=str||"";return this}},{}],25:[function(require,module,exports){var isArrayLike=function(array){return array instanceof Array||array instanceof NodeList||array instanceof HTMLCollection};var from=function(array){if(array instanceof Array)return array;var res=[];[].push.apply(res,array);return res};var join=function(array,str){return[].join.call(array,str)};var indexOf=function(array,element){for(var i=0;i<array.length;++i){if(array[i]==element){return i}}return-1};var splice=function(array,from,to){return[].splice.call(array,from,to)};var remove=function(array,element){var index=indexOf(array,element);return!!splice(array,index,1).length};var has=function(array,element){return~indexOf(array,element)};var add=function(array,array2){[].push.apply(array,array2)};var isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};var array={arrayLike:isArrayLike,from:from,join:join,index:indexOf,splice:splice,remove:remove,add:add,array:isArray};module.exports=array},{}],26:[function(require,module,exports){var extend=function(_extended,_super){_extended.prototype=Object.create(_super.prototype)};var _super=function(instance){var params=[].slice.call(arguments);params.shift();instance.constructor.apply(instance,params)};var classes={extend:extend,super:_super};module.exports=classes},{}],27:[function(require,module,exports){var prop=function(object,prop,desc){Object.defineProperty(object,prop,{enumerable:true,configurable:true,get:desc.get,set:desc.set})};var exports=function(objs,names,value){for(var i=0;i<obj.length;++i){for(var j=0;j<names.length;++j){objs[i][names[j]]=value}}};var isObject=function(obj){return Object.prototype.toString.call(obj)==="[object Object]"};var objects={prop:prop,export:exports,object:isObject};module.exports=objects},{}],28:[function(require,module,exports){var attributes=/\[([a-z][a-z0-9-_]*)(\||\*|\^|\$|~|)=([^\]]+)\]/gi;var parse=function(selector){var tag=false;var id=false;var attr={};selector=selector.replace(attributes,function(_,name,operator,value){attr[name]={operator:operator,value:value,toString:function(){return value}};return""});var classes=selector.split(".");if(selector[0]!=="."){var tagid=classes[0].split("#");tag=tagid[0]||false;id=tagid[1]||false}classes.splice(0,1);for(var i=0;i<classes.length;++i){var classid=classes[i].split("#");if(classid.length>1){id=id||classid[1];classes[i]=classid[0]}}return{tag:tag,id:id,classes:classes,attr:attr}};var selector={parse:parse};module.exports=selector},{}],29:[function(require,module,exports){var camel=function(str){return str.replace(/(\-[a-z])/g,function(match){return match.toUpperCase().slice(1)})};var dash=function(str){return str.replace(/([A-Z])/g,function(match){return"-"+match.toLowerCase()})};var spaces=function(str){return str.replace(/^\s+|\s+$/g,"")};var string={camel:camel,dash:dash,spaces:spaces};module.exports=string},{}],30:[function(require,module,exports){(function(global){var EventEmitter=require("./classes/EventEmitter");var classes=require("./util/classes");var objects=require("./util/object");var waff=function waff(){classes.super(this);var self=this;var state=function(){return document.readyState==="complete"||document.readyState==="interactive"};this.handler("ready",function(callback){if(state()){callback();return false}});this.EventEmitter=EventEmitter;var query=require("./element/query");objects.export([this,global],["q","query"],query);objects.export([this,global],["qq","queryAll"],query.all);var element=require("./element/create");objects.export([this,global],["e","element"],element);var text=require("./text/create");objects.export([this,global],["t","text"],text);require("./element");require("./text");if(state()){this.emit("ready")}else{var handler=function(){if(state()){document.removeListener("readystatechange",handler);self.emit("ready")}};document.addEventListener("readystatechange",handler)}};classes.extend(waff,EventEmitter);module.exports=new waff}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./classes/EventEmitter":1,"./element":3,"./element/create":2,"./element/query":20,"./text":22,"./text/create":21,"./util/classes":26,"./util/object":27}]},{},[30])(30)});
